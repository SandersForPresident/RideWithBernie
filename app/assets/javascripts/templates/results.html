<div class="row">
  <div class="col-sm-6 col-sm-offset-3 col-md-4 col-md-offset-4">
    <div class='header'>
      <small>Ridesharing to {{eventTitle}}</small>
    </div>
    <a href="#/profile" class='btn btn-info btn-sm'>&laquo; Profile</a>
    <div ng-if='profiles.length'>
      <p class='lead text-center'>
        People
      </p>
      <p class='text-center'>
        <small>Great! Contact any good matches below.</small>
      </p>
      <div class='row'>
        <div class='col-xs-8 col-xs-offset-2'>
          <select name='search' class='form-control' ng-model='search.type' ng-change='closeContactForms()'>
            <option value='drivers'>Displaying drivers</option>
            <option value='passengers'>Displaying passengers</option>
            <option value='everyone'>Displaying everyone</option>
          </select>
        </div>
      </div>

      <ul class='profile-results'>
        <li ng-repeat='profile in profiles | filter: searchFilter' class='profile-result'>
          <p class='clearfix'>
            <a href class='btn btn-success btn-sm disabled pull-right' ng-if='profile.contacted'>
              <i class='fa fa-check'></i>
              Contacted
            </a>
            <a href class='btn btn-info btn-sm pull-right' ng-if='!profile.contacted' ng-click='profile.contactFormOpen = !profile.contactFormOpen'>
              {{ profile.contactFormOpen ? "Cancel" : "Contact" }}
            </a>

            {{profile.firstName}}
          </p>
          <p>
            <small>{{profile.location}}</small>
            <br>
            <small class='text-muted' ng-if='profile.driver'>
              Driver -&nbsp;
              <ng-pluralize count='profile.seats' when=" { 1: '1 seat available', other: '{} seats available' } "></ng-pluralize>
            </small>
            <small class='text-muted' ng-if='!profile.driver'>
              Passenger - {{profile.passengers}} total
            </small>
          </p>
          <div ng-show='profile.contactFormOpen' class='contact-form'>
            <p>
              Contact {{profile.firstName}}
              <br>
              <small>
                We’ll send {{profile.firstName}} your contact info, saying:
                <ul>
                  <li ng-if='profile.driver'>You can drive</li>
                  <li ng-if='!profile.driver'>You need a ride</li>
                  <li>Your name</li>
                  <li>Your phone number</li>
                  <li>Your rough location</li>
                </ul>
                {{profile.firstName}} will call or text you to coordinate further (or not). Stay safe by talking ahead of time.
              </small>
            </p>
            <a href class='btn btn-danger btn-block'>Send my contact info</a>
            <a href class='btn btn-info btn-block' ng-click='profile.contactFormOpen = !profile.contactFormOpen'>Cancel</a>
          </div>
        </li>
      </ul>
    </div>
    <div ng-if='!profiles.length'>
      <div class='text-center'>
        <h1> Great! </h1>
        <p>
          <small>
            We’ve got your info, and we’ll let you know if anyone offers to give you a ride.
          </small>
        </p>
        <br>
        <p>
          <small>
            Bookmark this page to check back for new drivers. We’ve also texted you a link to get back here.
          </small>
        </p>
    </div>
  </div>
</div>
